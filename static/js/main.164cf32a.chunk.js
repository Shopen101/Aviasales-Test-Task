(this.webpackJsonpavia=this.webpackJsonpavia||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var c,a,r=n(163),i=n(0),o=n.n(i),s=n(20),d=n.n(s),l=n(14),u=n(32),p=n(72);!function(e){e.FETCH_TICKETS="tickets/FETCH_TICKETS",e.SET_TICKETS=" tickets/SET_TICKETS",e.SET_SORTED_TICKETS=" tickets/SET_SORTED_TICKETS",e.SET_LOADING_STATE="tickets/SET_LOADING_STATE"}(c||(c={})),function(e){e.LOADED="LOADED",e.LOADING="LOADING",e.ERROR="ERROR",e.NEVER="NEVER"}(a||(a={}));var b={tickets:[],sortedTickets:[],loadingState:a.NEVER},j=Object(p.a)((function(e,t){switch(t.type){case c.SET_TICKETS:e.tickets=t.payload,e.loadingState=a.LOADED;break;case c.SET_SORTED_TICKETS:e.sortedTickets=t.payload;break;case c.FETCH_TICKETS:e.tickets=[],e.loadingState=a.LOADING;break;case c.SET_LOADING_STATE:e.loadingState=t.payload}}),b),f=n(79),x=n(18),m=n.n(x),O=n(23),h=function(e){return{type:c.SET_SORTED_TICKETS,payload:e}},g=function(e){return{type:c.SET_LOADING_STATE,payload:e}},v=n(58),T=n(59),k=n.n(T),S=function(){return Object(v.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://front-test.beta.aviasales.ru/search");case 2:return t=e.sent,n=t.data.searchId,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))()},E=function(e){return Object(v.a)(m.a.mark((function t(){var n,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 2:return n=t.sent,c=n.data.tickets,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})))()},y=m.a.mark(w),N=m.a.mark(_);function w(){var e,t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(O.a)(S);case 3:return e=n.sent,n.next=6,Object(O.a)(E,e);case 6:return(t=n.sent).sort((function(e,t){return e.price>t.price?1:e.price===t.price?0:e.price<t.price?-1:1})),n.next=10,Object(O.b)((r=t,{type:c.SET_TICKETS,payload:r}));case 10:return n.next=12,Object(O.b)(h(t));case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(0),n.next=18,Object(O.b)(g(a.ERROR));case 18:case"end":return n.stop()}var r}),y,null,[[0,14]])}function _(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)(c.FETCH_TICKETS,w);case 2:case"end":return e.stop()}}),N)}var C=m.a.mark(D);function D(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)(_);case 2:case"end":return e.stop()}}),C)}var I="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.b,A=Object(f.a)(),R=Object(u.c)(j,I(Object(u.a)(A)));A.run(D);var B=n(30),L=n(159),F=n(160),K=n(161),G=n(165),M=n(162),H=n(151),W=n(168),z=function(e){return e.tickets},P=function(e){return e.sortedTickets},V=function(e){return e.loadingState},J=n.p+"static/media/logo.f2ab8f4c.svg",X=n(52),U=n(156),$=n(27),q=n(155),Q=n(152),Y=n(153),Z=n(154),ee=n(167),te=n(5),ne=n(77),ce=n.n(ne),ae=n(3),re=Object(H.a)((function(e){return Object(W.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,borderRadius:10},CheckIcon:{color:"#2196F3",padding:"0",position:"absolute",top:"7px",left:"11px",width:"16px"},icon:{borderRadius:2,width:20,height:20,padding:"0px",margin:"0px",backgroundColor:"#fff",border:"1px solid #9ABBCE"},checkedIcon:{border:"1px solid ".concat(e.palette.primary.main),"&:before":{display:"block",content:'""',backgroundPosition:"20% 20%"}},ListPadding:{padding:"0 0 0 8px"},listItem:{"&:hover":{background:"rgba(241, 252, 255, 1)"}}})})),ie=o.a.memo((function(e){var t=e.allTickets,n=re(),c=Object(i.useState)(0),a=Object(B.a)(c,2),r=a[0],s=a[1],d=Object(l.b)(),u=Object(l.c)(P),p=o.a.useRef([]);p.current=[];var b=Object(i.useState)([{name:"\u0412\u0441\u0435",checked:!0},{name:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",checked:!0},{name:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",checked:!0},{name:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:!0},{name:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",checked:!0}]),j=Object(B.a)(b,2),f=j[0],x=j[1],m=f.map((function(e,c){var a="checkbox-list-label-".concat(e.name);return Object(ae.jsxs)(Q.a,{role:void 0,dense:!0,button:!0,className:n.listItem,onClick:function(){return function(e,n){if(0===n?(x(f.map((function(e,t){return r%2===0?!0===e.checked&&(e.checked=!1):!1===e.checked&&(e.checked=!0),e}))),s(r+1)):(f[0].checked=!1,s(1),x(f.map((function(e,t){return t===n&&(e.checked=!e.checked),e})))),0===n)e.checked?(p.current=t,d(h(Object($.a)(t)))):(p.current=[],d(h([])));else if(e.checked){var c=t.filter((function(e){return e.segments[0].stops.length===n-1})),a=t.filter((function(e){return e.segments[1].stops.length===n-1}));d(h(Array.from(new Set([].concat(Object($.a)(u),Object($.a)(c),Object($.a)(a))))))}else{var i=u.filter((function(e){var t;return(null===(t=e.segments[0])||void 0===t?void 0:t.stops.length)!==n-1})).filter((function(e){var t;return(null===(t=e.segments[1])||void 0===t?void 0:t.stops.length)!==n-1}));d(h(i))}}(e,c)},children:[Object(ae.jsx)(Y.a,{className:n.ListPadding,children:Object(ae.jsx)(ee.a,{checked:e.checked,edge:"start",disableRipple:!0,inputProps:{"aria-labelledby":a},checkedIcon:Object(ae.jsx)("span",{className:Object(te.a)(n.icon,n.checkedIcon),children:Object(ae.jsx)(ce.a,{className:n.CheckIcon})}),icon:Object(ae.jsx)("span",{className:n.icon})})}),Object(ae.jsx)(Z.a,{id:a,primary:"".concat(e.name)})]},"".concat(e.name))}));return Object(ae.jsx)(q.a,{className:n.root,children:m})}),(function(e,t){return JSON.stringify(e.allTickets)===JSON.stringify(t.allTickets)})),oe=Object(H.a)((function(e){return Object(W.a)({root:{flexGrow:1},paper:{padding:e.spacing(0),textAlign:"center",color:e.palette.text.secondary,boxShadow:"-1px 1px 6px 1px #D5D5D5",borderRadius:10,maxWidth:"230px"},headerText:{padding:"20px 0 0 20px",fontSize:14}})})),se=o.a.memo((function(){var e=oe(),t=Object(l.c)(z);return Object(ae.jsxs)(U.a,{className:e.paper,children:[Object(ae.jsx)(X.a,{variant:"subtitle1",align:"left",className:e.headerText,children:"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"}),Object(ae.jsx)(ie,{allTickets:t})]})})),de=new Intl.NumberFormat("ru",{style:"decimal"}),le=function(e,t){return Math.round(Math.random()*(t-e)+e)},ue=n(164),pe=function(e){var t=Math.floor(e/60),n=e-60*t;return"".concat(t,"\u0447 ").concat(n,"\u043c")},be=function(e){return Object(ue.a)(new Date(e),"HH:MM")},je=Object(H.a)((function(e){return Object(W.a)({root:{flexGrow:1},paper:{padding:e.spacing(2.5),paddingTop:"30px",color:e.palette.text.secondary,boxShadow:"-1px 1px 6px 1px #D5D5D5",borderRadius:5,display:"flex",flexFlow:"column wrap",marginBottom:"20px"},header:{display:"flex",justifyContent:"space-between",marginBottom:"25px"},price:{fontWeight:600,fontSize:"24px",lineHeight:"24px",color:e.palette.primary.main},wayText:{fontWeight:400,fontSize:"12px",lineHeight:"18px",letterSpacing:"0.5px",marginBottom:"2px",color:"#A0B0B9"},timeText:{fontWeight:600,fontSize:"14px",lineHeight:"21px",color:e.palette.secondary.main},infoBlock:{display:"flex",justifyContent:"space-between",alignItems:"center"},infoBlockData:{width:"110px"}})})),fe=function(e){var t=e.price,n=e.segments,c=je();return Object(ae.jsxs)(U.a,{className:c.paper,children:[Object(ae.jsxs)("div",{className:c.header,children:[Object(ae.jsx)("div",{children:Object(ae.jsxs)(X.a,{className:c.price,children:[de.format(t)," \u0420"]})}),Object(ae.jsx)("div",{children:Object(ae.jsx)("img",{src:"//pics.avs.io/99/36/".concat(le(1,9),".png"),alt:"avia company logo"})})]}),Object(ae.jsx)("div",{children:n.map((function(e,t){var n,a,r,i,o,s,d;return Object(ae.jsxs)(G.a,{mb:2,className:c.infoBlock,children:[Object(ae.jsxs)("div",{className:c.infoBlockData,children:[Object(ae.jsxs)(X.a,{className:c.wayText,children:[e.origin," - ",e.destination]}),Object(ae.jsxs)(X.a,{className:c.timeText,children:[be(e.date)," -"," ",(s=e.date,d=e.duration,be(new Date(new Date(s).setMinutes(d)).toString()))]})]}),Object(ae.jsxs)("div",{className:c.infoBlockData,children:[Object(ae.jsx)(X.a,{className:c.wayText,children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(ae.jsx)(X.a,{className:c.timeText,children:pe(null===e||void 0===e?void 0:e.duration)})]}),Object(ae.jsxs)("div",{className:c.infoBlockData,children:[Object(ae.jsx)(X.a,{className:c.wayText,children:Number(null===(n=e.stops)||void 0===n?void 0:n.length)>1?"".concat(null===(a=e.stops)||void 0===a?void 0:a.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"):Number(null===(r=e.stops)||void 0===r?void 0:r.length)<1?"\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a":"".concat(null===(i=e.stops)||void 0===i?void 0:i.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410")}),Object(ae.jsx)(X.a,{className:c.timeText,children:null===(o=e.stops)||void 0===o?void 0:o.join(", ")})]})]},"".concat(new Date(e.duration),"__").concat((new Date).toString(),"___").concat(le(0,1e3),"__").concat(t))}))})]})},xe=n(80),me=n(7),Oe=n(166),he=n(157),ge=Object(me.a)({root:{width:"100%"},indicator:{display:"none"}})(Oe.a),ve=Object(me.a)((function(e){return Object(W.a)({root:{textTransform:"none",fontWeight:600,border:"1px solid #ccc",color:e.palette.secondary.main,background:"#fff",width:"100%","&:hover":{color:"#40a9ff",opacity:1},"&$selected":{color:"#fff",backgroundColor:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium}},selected:{}})}))((function(e){return Object(ae.jsx)(he.a,Object(xe.a)({disableRipple:!0},e))})),Te=Object(H.a)((function(e){return{root:{flexGrow:1},padding:{padding:e.spacing(1.5)},leftBdrs:{borderRadius:"5px 0 0 5px"},rightBdrs:{borderRadius:"0 5px 5px 0"}}})),ke=o.a.memo((function(){var e=Te(),t=Object(l.b)(),n=Object(l.c)(P),c=o.a.useState(0),a=Object(B.a)(c,2),r=a[0],i=a[1],s=function(e){if("fast"===e){var c=n.concat().sort((function(e,t){var n,c,a,r,i,o;return(null===(n=e.segments[0])||void 0===n?void 0:n.duration)>(null===(c=t.segments[0])||void 0===c?void 0:c.duration)?1:(null===(a=e.segments[0])||void 0===a?void 0:a.duration)===(null===(r=t.segments[0])||void 0===r?void 0:r.duration)?0:(null===(i=e.segments[0])||void 0===i?void 0:i.duration)<(null===(o=t.segments[0])||void 0===o?void 0:o.duration)?-1:1}));t(h(c))}if("cheap"===e){var a=n.concat().sort((function(e,t){return e.price>t.price?1:e.price===t.price?0:e.price<t.price?-1:1}));t(h(a))}if("optimal"===e){var r=Math.round(n.reduce((function(e,t){return e+t.price}),0)/n.length),i=n.filter((function(e){return e.price<r/2})).sort((function(e,t){var n,c,a,r,i,o;return(null===(n=e.segments[0])||void 0===n?void 0:n.duration)>(null===(c=t.segments[0])||void 0===c?void 0:c.duration)?1:(null===(a=e.segments[0])||void 0===a?void 0:a.duration)===(null===(r=t.segments[0])||void 0===r?void 0:r.duration)?0:(null===(i=e.segments[0])||void 0===i?void 0:i.duration)<(null===(o=t.segments[0])||void 0===o?void 0:o.duration)?-1:1}));t(h(Array.from(new Set([].concat(Object($.a)(i),Object($.a)(n))))))}};return Object(ae.jsxs)("div",{className:e.root,children:[Object(ae.jsxs)(ge,{variant:"fullWidth",value:r,onChange:function(e,t){return i(t)},"aria-label":"ant example",children:[Object(ae.jsx)(ve,{onClick:function(){return s("cheap")},className:e.leftBdrs,label:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0401\u0412\u042b\u0419"}),Object(ae.jsx)(ve,{onClick:function(){return s("fast")},label:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"}),Object(ae.jsx)(ve,{onClick:function(){return s("optimal")},className:e.rightBdrs,label:"\u041e\u041f\u0422\u0418\u041c\u0410\u041b\u042c\u041d\u042b\u0419"})]}),Object(ae.jsx)(X.a,{className:e.padding})]})})),Se=n(158),Ee=Object(H.a)((function(e){return Object(W.a)({btnText:{width:"100%",height:"50px",fontSize:"12px"}})})),ye=function(e){var t=e.onClick,n=Ee();return Object(ae.jsx)(Se.a,{onClick:t,className:n.btnText,variant:"contained",color:"primary",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 5 \u0431\u0438\u043b\u0435\u0442\u043e\u0432!"})},Ne=Object(H.a)((function(e){return Object(W.a)({root:{background:"#f3f7fa",height:"100vh",padding:"0 110px"},circular:{display:"flex",justifyContent:"center"}})}));var we=function(){var e=Ne(),t=Object(l.b)(),n=Object(l.c)(V),a=Object(l.c)(P),r=Object(i.useState)(5),s=Object(B.a)(r,2),d=s[0],u=s[1];return Object(i.useEffect)((function(){t({type:c.FETCH_TICKETS})}),[t]),Object(ae.jsx)("div",{className:"App",children:Object(ae.jsxs)(o.a.Fragment,{children:[Object(ae.jsx)(L.a,{}),Object(ae.jsx)(F.a,{maxWidth:"md",className:e.root,children:Object(ae.jsxs)(K.a,{container:!0,spacing:2,children:[Object(ae.jsx)(K.a,{item:!0,container:!0,justifyContent:"center",xs:12,children:Object(ae.jsx)(G.a,{mt:3,children:Object(ae.jsx)("img",{src:J,alt:"logo Aviasales"})})}),Object(ae.jsx)(K.a,{item:!0,xs:4,children:Object(ae.jsx)(se,{})}),Object(ae.jsxs)(K.a,{item:!0,xs:8,children:[Object(ae.jsx)(ke,{}),"LOADING"===n||"NEVER"===n?Object(ae.jsx)(G.a,{mb:3,className:e.circular,children:Object(ae.jsx)(M.a,{})}):"ERROR"===n?"\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430":Object(ae.jsxs)(ae.Fragment,{children:[a.map((function(e,t){return t<d&&Object(ae.jsx)(fe,{price:e.price,segments:e.segments},"".concat(e.price,"__").concat((new Date).toString(),"__").concat(t))})),Object(ae.jsx)(ye,{onClick:function(){u(d+5)}})]})]})]})})]})})},_e=(n(119),n(78)),Ce=Object(_e.a)({palette:{primary:{main:"#2196F3"},secondary:{main:"#4A4A4A"},background:{default:"#F3F7FA"}},typography:{subtitle1:{color:"#4A4A4A",fontSize:"1rem"},subtitle2:{color:"#A0B0B9",fontSize:"1rem"}},overrides:{MuiListItemIcon:{root:{minWidth:"auto"}},MuiTab:{wrapper:{fontSize:"12px"}}}});d.a.render(Object(ae.jsx)(r.a,{theme:Ce,children:Object(ae.jsx)(l.a,{store:R,children:Object(ae.jsx)(we,{})})}),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.164cf32a.chunk.js.map